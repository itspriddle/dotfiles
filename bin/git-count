#!/usr/bin/ruby
# Usage: git count [options]
#
# Options are passed to `git shortlog`.
#
# Examples:
#
#     git count
#     git count --no-merges --email

authors = `git shortlog -sn #{ARGV.join(' ')}`.chomp

if authors.lines.size > 1
  total = 0
  authors.lines.each do |line|
    count, author = line.strip.split("\t")
    total += count.to_i
    puts "%6d  %s" % [count, author]
  end
  puts "\n%6d  total" % total
else
  puts authors
end
