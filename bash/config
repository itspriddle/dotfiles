#!/usr/bin/env bash

if [ -f /etc/bashrc ]; then
  source /etc/bashrc
fi

export HISTCONTROL=ignoredups
export HISTSIZE=5000

set_prompt() {
  local BLUE="\[\033[1;34m\]"
  local GREEN="\[\033[1;32m\]"
  local NOCOLOR="\[\033[0m\]"

  local git_tmp=$(__git_ps1)

  local GIT=

  if [ "$git_tmp" ]; then
    GIT="${GREEN}${git_tmp}${NOCOLOR}"
  fi

  PS1="${BLUE}\W${NOCOLOR}${GIT} $ "

  case "$TERM" in
    xterm*|rxvt*)
      if [[ -n $SSH_CONNECTION ]]; then
        PS1="$PS1 \e]2;\u@\h:\w\a"
      else
        PS1="$PS1 \e]2;\h:\w\a"
      fi
      ;;
  esac
}

export PROMPT_COMMAND=set_prompt

# History
bind '"\e[A": history-search-backward'
bind '"\e[B": history-search-forward'
